#!/usr/bin/env bash
set -euo pipefail

# Venv persistente (para no tocar el Python del sistema: PEP 668)
VENV_DIR="${VENV_DIR:-/opt/py-venv}"

if [[ ! -d "${VENV_DIR}" ]]; then
  python3 -m venv "${VENV_DIR}"
  "${VENV_DIR}/bin/python" -m pip install --upgrade pip setuptools wheel
fi

exec "${VENV_DIR}/bin/python" "$@"
